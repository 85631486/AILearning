# CS146Sè½»é‡çº§åœ¨çº¿å­¦ä¹ ç³»ç»Ÿæ–¹æ¡ˆè®¾è®¡

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

åŸºäºæ–¯å¦ç¦CS146Sç°ä»£è½¯ä»¶å¼€å‘è€…è¯¾ç¨‹ï¼Œæ„å»ºè½»é‡çº§åœ¨çº¿å­¦ä¹ å¹³å°ï¼Œèšç„¦æ ¸å¿ƒæ•™å­¦åŠŸèƒ½ï¼šåœ¨çº¿ç»ƒä¹ ã€ç”¨æˆ·ç®¡ç†ã€è¯¾ç¨‹æ–‡æ¡£å’ŒAIå­¦ä¹ åŠ©ç†ã€‚

### ğŸ¯ é¡¹ç›®ç›®æ ‡

1. **è½»é‡çº§éƒ¨ç½²**ï¼šå•ä½“åº”ç”¨æ¶æ„ï¼Œå¿«é€Ÿéƒ¨ç½²å’Œç»´æŠ¤
2. **æ ¸å¿ƒåŠŸèƒ½èšç„¦**ï¼šåœ¨çº¿ç»ƒä¹  + è¯¾ç¨‹æ–‡æ¡£ + AIåŠ©æ‰‹
3. **å®ç”¨æ€§ä¼˜å…ˆ**ï¼šè§£å†³å®é™…æ•™å­¦éœ€æ±‚ï¼Œé¿å…è¿‡åº¦è®¾è®¡
4. **æ˜“äºæ‰©å±•**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºåç»­åŠŸèƒ½æ‰©å±•

### ğŸ“Š æ ¸å¿ƒä»·å€¼

- **æ•™å­¦æ•ˆç‡æå‡**ï¼šç»“æ„åŒ–ç»ƒä¹  + AIå³æ—¶è¾…å¯¼
- **å­¦ä¹ ä½“éªŒä¼˜åŒ–**ï¼šåœ¨çº¿ä»£ç ç»ƒä¹  + è¿›åº¦è¿½è¸ª
- **æˆæœ¬æ§åˆ¶**ï¼šè½»é‡çº§æ¶æ„ï¼Œé™ä½éƒ¨ç½²å’Œç»´æŠ¤æˆæœ¬
- **å¿«é€Ÿä¸Šçº¿**ï¼šç®€åŒ–æŠ€æœ¯æ ˆï¼Œç¼©çŸ­å¼€å‘å‘¨æœŸ

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·æµè§ˆå™¨ (Browser)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ç™»å½•é¡µé¢ â”‚ è¯¾ç¨‹ä¸»é¡µ â”‚ ç»ƒä¹ é¡µé¢ â”‚ æ–‡æ¡£é¡µé¢ â”‚ AIåŠ©æ‰‹é¡µé¢ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚ HTTP/HTTPS
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Flask Webåº”ç”¨     â”‚
                    â”‚   (Python + Jinja2) â”‚
                    â”‚                    â”‚
                    â”‚ â€¢ ç”¨æˆ·è®¤è¯æ¨¡å—     â”‚
                    â”‚ â€¢ è¯¾ç¨‹å†…å®¹æ¨¡å—     â”‚
                    â”‚ â€¢ ç»ƒä¹ æ‰§è¡Œæ¨¡å—     â”‚
                    â”‚ â€¢ AIäº¤äº’æ¨¡å—       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   æ•°æ®å­˜å‚¨å±‚       â”‚
                    â”‚                    â”‚
                    â”‚ â€¢ SQLiteæ•°æ®åº“     â”‚
                    â”‚ â€¢ æœ¬åœ°æ–‡ä»¶å­˜å‚¨     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   å¤–éƒ¨æœåŠ¡         â”‚
                    â”‚                    â”‚
                    â”‚ â€¢ é˜¿é‡Œäº‘åƒé—®API    â”‚
                    â”‚ â€¢ ä»£ç æ‰§è¡Œç¯å¢ƒ     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆé€‰æ‹©

#### åç«¯æŠ€æœ¯æ ˆ
- **Webæ¡†æ¶**ï¼šFlask (Pythonè½»é‡çº§æ¡†æ¶)
- **æ¨¡æ¿å¼•æ“**ï¼šJinja2 (å†…ç½®æ¨¡æ¿)
- **æ•°æ®åº“**ï¼šSQLite (è½»é‡çº§æ–‡ä»¶æ•°æ®åº“)
- **ORM**ï¼šFlask-SQLAlchemy (ç®€å•ORM)
- **è¡¨å•å¤„ç†**ï¼šFlask-WTF (è¡¨å•éªŒè¯)

#### å‰ç«¯æŠ€æœ¯æ ˆ
- **åŸºç¡€**ï¼šHTML5 + CSS3 + JavaScript (ES6+)
- **UIæ¡†æ¶**ï¼šBootstrap 5 (å“åº”å¼è®¾è®¡)
- **ä»£ç ç¼–è¾‘å™¨**ï¼šMonaco Editor (VS Codeç¼–è¾‘å™¨)
- **äº¤äº’å¢å¼º**ï¼šjQuery (ç®€åŒ–DOMæ“ä½œ)
- **å›¾è¡¨å±•ç¤º**ï¼šChart.js (å­¦ä¹ è¿›åº¦å›¾è¡¨)

#### AIä¸å¤–éƒ¨æœåŠ¡
- **AIæ¨¡å‹**ï¼šé˜¿é‡Œäº‘åƒé—® (Qwen) API
- **é…ç½®ç®¡ç†**ï¼šç¯å¢ƒå˜é‡ + é…ç½®æ–‡ä»¶
- **ä»£ç æ‰§è¡Œ**ï¼šDockerå®¹å™¨ (å¯é€‰ï¼Œè½»é‡çº§Pythonæ‰§è¡Œ)

#### éƒ¨ç½²ä¸è¿ç»´
- **WebæœåŠ¡å™¨**ï¼šGunicorn + Nginx
- **å®¹å™¨åŒ–**ï¼šDocker + Docker Compose
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šGit
- **è‡ªåŠ¨åŒ–éƒ¨ç½²**ï¼šShellè„šæœ¬

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ ğŸ‘¤

#### åŠŸèƒ½ç‰¹æ€§
- **ç”¨æˆ·æ³¨å†Œç™»å½•**ï¼šé‚®ç®±æ³¨å†Œ + å¯†ç ç™»å½•
- **ä¼šè¯ç®¡ç†**ï¼šåŸºäºFlask-Sessionçš„ç”¨æˆ·çŠ¶æ€ç®¡ç†
- **åŸºç¡€èµ„æ–™**ï¼šç”¨æˆ·åã€é‚®ç®±ã€æ³¨å†Œæ—¶é—´
- **å­¦ä¹ è¿›åº¦**ï¼šè®°å½•ç”¨æˆ·åœ¨å„å‘¨çš„å­¦ä¹ è¿›åº¦

#### æ ¸å¿ƒè·¯ç”±
```python
# ç”¨æˆ·è®¤è¯è·¯ç”±
@app.route('/login', methods=['GET', 'POST'])
@app.route('/register', methods=['GET', 'POST'])
@app.route('/logout')

# ç”¨æˆ·ä¸­å¿ƒ
@app.route('/profile')
@app.route('/progress')
```

### 2. å‘¨å­¦ä¹ æ¨¡å— ğŸ“š

#### å­¦ä¹ ç»“æ„è®¾è®¡
```
CS146Sè¯¾ç¨‹
â”œâ”€â”€ Week 1: æç¤ºå·¥ç¨‹æŠ€æœ¯
â”‚   â”œâ”€â”€ å­¦ä¹ æ–‡æ¡£ (README.md)
â”‚   â”œâ”€â”€ ç»ƒä¹ é¢˜ç›® (k_shot_prompting.pyç­‰)
â”‚   â””â”€â”€ åœ¨çº¿ç»ƒä¹ é¡µé¢
â”œâ”€â”€ Week 2: è¡ŒåŠ¨é¡¹æå–å™¨
â”‚   â”œâ”€â”€ å­¦ä¹ æ–‡æ¡£
â”‚   â”œâ”€â”€ ä»£ç ç»ƒä¹ 
â”‚   â””â”€â”€ é¡¹ç›®ç»ƒä¹ 
â”œâ”€â”€ Week 3: è‡ªå®šä¹‰MCPæœåŠ¡å™¨
â”œâ”€â”€ Week 4: è‡ªä¸»ç¼–ç ä»£ç†
â”œâ”€â”€ Week 5: å¤šä»£ç†å·¥ä½œæµ
â”œâ”€â”€ Week 6: å®‰å…¨æ‰«æä¸ä¿®å¤
â”œâ”€â”€ Week 7: AIä»£ç å®¡æŸ¥
â””â”€â”€ Week 8: å¤šæ ˆåº”ç”¨æ„å»º
```

#### åŠŸèƒ½ç‰¹æ€§
- **æ–‡æ¡£å±•ç¤º**ï¼šMarkdownæ ¼å¼çš„å­¦ä¹ èµ„æ–™åœ¨çº¿æµè§ˆ
- **ä»£ç ç¤ºä¾‹**ï¼šé›†æˆä»£ç é«˜äº®æ˜¾ç¤º
- **ç»ƒä¹ å…¥å£**ï¼šæ¯å‘¨ç»ƒä¹ çš„ç»Ÿä¸€å…¥å£
- **è¿›åº¦è¿½è¸ª**ï¼šè®°å½•å­¦ä¹ è¿›åº¦å’Œå®ŒæˆçŠ¶æ€

### 3. åœ¨çº¿ç»ƒä¹ ç³»ç»Ÿ ğŸ’»

#### Pythonä»£ç æ‰§è¡Œæ¶æ„è®¾è®¡

##### æ‰§è¡Œæµç¨‹
```
å‰ç«¯ä»£ç ç¼–è¾‘å™¨ â†’ AJAXè¯·æ±‚ â†’ Flaskåç«¯ â†’ ä»£ç æ‰§è¡ŒæœåŠ¡
       â†“                                           â†“
   Monaco Editor â† WebSocket/è½®è¯¢ â† æ‰§è¡ŒçŠ¶æ€/ç»“æœ â† Pythonè¿›ç¨‹
```

##### æ ¸å¿ƒç»„ä»¶
1. **ä»£ç æ‰§è¡ŒæœåŠ¡ (Flaskåç«¯)**
```python
class CodeExecutor:
    def execute_code(self, code: str, inputs: dict = None) -> dict:
        """
        æ‰§è¡ŒPythonä»£ç ï¼Œè¿”å›æ‰§è¡Œç»“æœ
        - å¤„ç†æ ‡å‡†è¾“å…¥è¾“å‡ºé‡å®šå‘
        - æ”¯æŒäº¤äº’å¼è¾“å…¥
        - å®æ—¶çŠ¶æ€æ›´æ–°
        """
        # åˆ›å»ºä¸´æ—¶æ–‡ä»¶
        with tempfile.NamedTemporaryFile(mode='w', suffix='.py', delete=False) as f:
            f.write(code)
            temp_file = f.name

        try:
            # æ‰§è¡Œä»£ç å¹¶æ•è·è¾“å‡º
            result = subprocess.run(
                ['python', temp_file],
                input=inputs.get('stdin', ''),
                capture_output=True,
                text=True,
                timeout=30  # 30ç§’è¶…æ—¶
            )

            return {
                'success': result.returncode == 0,
                'stdout': result.stdout,
                'stderr': result.stderr,
                'returncode': result.returncode,
                'execution_time': time.time() - start_time
            }
        except subprocess.TimeoutExpired:
            return {'success': False, 'error': 'ä»£ç æ‰§è¡Œè¶…æ—¶'}
        except Exception as e:
            return {'success': False, 'error': str(e)}
        finally:
            os.unlink(temp_file)
```

2. **å‰ç«¯çŠ¶æ€ç®¡ç†**
```javascript
class CodeRunner {
    constructor(editor, outputPanel, statusPanel) {
        this.editor = editor;
        this.outputPanel = outputPanel;
        this.statusPanel = statusPanel;
        this.isRunning = false;
    }

    async runCode() {
        if (this.isRunning) return;

        const code = this.editor.getValue();
        this.isRunning = true;
        this.updateStatus('running', 'æ­£åœ¨æ‰§è¡Œ...');

        try {
            const response = await fetch('/api/execute', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    code: code,
                    inputs: this.collectInputs()  // æ”¶é›†ç”¨æˆ·è¾“å…¥
                })
            });

            const result = await response.json();
            this.displayResult(result);

        } catch (error) {
            this.displayError(error);
        } finally {
            this.isRunning = false;
        }
    }

    updateStatus(status, message) {
        const statusEl = this.statusPanel;
        statusEl.textContent = message;
        statusEl.className = `status-${status}`;
    }

    displayResult(result) {
        if (result.success) {
            this.updateStatus('success', 'æ‰§è¡ŒæˆåŠŸ');
            this.outputPanel.innerHTML = `
                <div class="output-section">
                    <h5>æ ‡å‡†è¾“å‡º:</h5>
                    <pre class="output-stdout">${result.stdout}</pre>
                </div>
                ${result.stderr ? `
                <div class="output-section">
                    <h5>æ ‡å‡†é”™è¯¯:</h5>
                    <pre class="output-stderr">${result.stderr}</pre>
                </div>
                ` : ''}
                <div class="execution-info">
                    æ‰§è¡Œæ—¶é—´: ${result.execution_time.toFixed(2)}ç§’
                </div>
            `;
        } else {
            this.updateStatus('error', 'æ‰§è¡Œå¤±è´¥');
            this.outputPanel.innerHTML = `
                <div class="error-section">
                    <h5>é”™è¯¯ä¿¡æ¯:</h5>
                    <pre class="error-output">${result.error || result.stderr}</pre>
                </div>
            `;
        }
    }
}
```

3. **å®‰å…¨æ²™ç®±è®¾è®¡**
```python
class SecureCodeExecutor:
    def __init__(self):
        self.forbidden_modules = {
            'os', 'sys', 'subprocess', 'importlib', 'builtins',
            'socket', 'urllib', 'http', 'ftplib', 'smtplib'
        }
        self.forbidden_functions = {
            'eval', 'exec', 'open', '__import__',
            'input', 'raw_input'  # è‡ªå®šä¹‰inputå¤„ç†
        }

    def validate_code(self, code: str) -> bool:
        """åŸºç¡€å®‰å…¨æ£€æŸ¥"""
        # æ£€æŸ¥ç¦æ­¢çš„import
        for module in self.forbidden_modules:
            if f'import {module}' in code or f'from {module}' in code:
                return False

        # æ£€æŸ¥ç¦æ­¢çš„å‡½æ•°è°ƒç”¨
        for func in self.forbidden_functions:
            if func in code and 'def ' + func not in code:  # å…è®¸å®šä¹‰ä½†ä¸å…è®¸è°ƒç”¨
                return False

        return True

    def execute_safely(self, code: str, inputs: dict = None) -> dict:
        """å®‰å…¨æ‰§è¡Œä»£ç """
        if not self.validate_code(code):
            return {'success': False, 'error': 'ä»£ç åŒ…å«ç¦æ­¢çš„æ“ä½œ'}

        # ä½¿ç”¨èµ„æºé™åˆ¶æ‰§è¡Œ
        return self.execute_with_limits(code, inputs)

    def execute_with_limits(self, code: str, inputs: dict) -> dict:
        """å¸¦èµ„æºé™åˆ¶çš„æ‰§è¡Œ"""
        import resource
        import signal

        def set_limits():
            # è®¾ç½®CPUæ—¶é—´é™åˆ¶ (5ç§’)
            resource.setrlimit(resource.RLIMIT_CPU, (5, 5))
            # è®¾ç½®å†…å­˜é™åˆ¶ (100MB)
            resource.setrlimit(resource.RLIMIT_AS, (100 * 1024 * 1024, 100 * 1024 * 1024))

        # åˆ›å»ºå­è¿›ç¨‹æ‰§è¡Œ
        return self.execute_in_subprocess(code, inputs, set_limits)
```

##### å¯è¡Œæ€§åˆ†æ

âœ… **æŠ€æœ¯å¯è¡Œæ€§é«˜**ï¼š
1. **Pythonæ‰§è¡Œ**ï¼šsubprocessæ¨¡å—å¯ä»¥å¯é æ‰§è¡ŒPythonä»£ç 
2. **è¾“å…¥è¾“å‡ºå¤„ç†**ï¼šé€šè¿‡stdin/stdouté‡å®šå‘å®ç°
3. **å®æ—¶çŠ¶æ€**ï¼šWebSocketæˆ–AJAXè½®è¯¢å±•ç¤ºæ‰§è¡ŒçŠ¶æ€
4. **å®‰å…¨æ§åˆ¶**ï¼šä»£ç é™æ€åˆ†æ + æ²™ç®±ç¯å¢ƒ

âš ï¸ **éœ€è¦è§£å†³çš„å…³é”®é—®é¢˜**ï¼š
1. **äº¤äº’å¼è¾“å…¥**ï¼šå¦‚ä½•å¤„ç†`input()`å‡½æ•°çš„å®æ—¶è¾“å…¥ï¼Ÿ
2. **å®æ—¶è¾“å‡º**ï¼šå¦‚ä½•å®æ—¶æ˜¾ç¤º`print()`çš„è¾“å‡ºï¼Ÿ
3. **é•¿æ—¶é—´è¿è¡Œ**ï¼šå¦‚ä½•å¤„ç†å¾ªç¯æˆ–é•¿æ—¶é—´è®¡ç®—ï¼Ÿ
4. **å¹¶å‘å®‰å…¨**ï¼šå¤šç”¨æˆ·åŒæ—¶æ‰§è¡Œçš„èµ„æºéš”ç¦»

##### è§£å†³æ–¹æ¡ˆè®¾è®¡

**æ–¹æ¡ˆä¸€ï¼šåŒæ­¥æ‰§è¡Œ + è¾“å…¥é¢„æ”¶é›†** â­æ¨è
```
ç”¨æˆ·è¾“å…¥ä»£ç  â†’ å‰ç«¯æ”¶é›†æ‰€æœ‰input â†’ å‘é€åˆ°åç«¯ â†’ æ‰§è¡Œå®Œæˆ â†’ è¿”å›å®Œæ•´ç»“æœ
ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œå®‰å…¨å¯é 
ç¼ºç‚¹ï¼šæ— æ³•å®æ—¶äº¤äº’ï¼Œä¸æ”¯æŒåŠ¨æ€è¾“å…¥
é€‚ç”¨ï¼šå¤§å¤šæ•°ç»ƒä¹ åœºæ™¯
```

**æ–¹æ¡ˆäºŒï¼šå¼‚æ­¥æ‰§è¡Œ + WebSocketé€šä¿¡**
```
ä»£ç æ‰§è¡Œ â†’ WebSocketè¿æ¥ â†’ å®æ—¶è¾“å‡ºæµ â†’ inputè¯·æ±‚ â†’ å‰ç«¯å“åº” â†’ ç»§ç»­æ‰§è¡Œ
ä¼˜ç‚¹ï¼šå®Œå…¨æ¨¡æ‹Ÿæœ¬åœ°ç¯å¢ƒï¼Œæ”¯æŒå®æ—¶äº¤äº’
ç¼ºç‚¹ï¼šå®ç°å¤æ‚ï¼Œèµ„æºæ¶ˆè€—å¤§
é€‚ç”¨ï¼šé«˜çº§äº¤äº’å¼ç»ƒä¹ 
```

**æ¨èæ–¹æ¡ˆ**ï¼šç»“åˆä½¿ç”¨
- å¤§å¤šæ•°ç»ƒä¹ ï¼šæ–¹æ¡ˆä¸€ï¼ˆç®€å•å¯é ï¼‰
- ç‰¹æ®Šäº¤äº’ç»ƒä¹ ï¼šæ–¹æ¡ˆäºŒï¼ˆå®Œå…¨æ¨¡æ‹Ÿï¼‰

#### ç»ƒä¹ ç±»å‹
1. **æç¤ºå·¥ç¨‹ç»ƒä¹ **ï¼šWeek1çš„AIæç¤ºç¼–å†™å’Œæµ‹è¯•
2. **ä»£ç ç¼–å†™ç»ƒä¹ **ï¼šPythonä»£ç ç¼–å†™å’Œè¿è¡Œ
3. **é¡¹ç›®å®è·µç»ƒä¹ **ï¼šå®Œæ•´çš„åº”ç”¨å¼€å‘ç»ƒä¹ 
4. **é…ç½®éªŒè¯ç»ƒä¹ **ï¼šç¯å¢ƒé…ç½®å’ŒAPIæµ‹è¯•

#### æ ¸å¿ƒåŠŸèƒ½
- **ä»£ç ç¼–è¾‘å™¨**ï¼šMonaco Editoré›†æˆï¼Œæ”¯æŒPythonè¯­æ³•é«˜äº®
- **ä»£ç æ‰§è¡Œ**ï¼šè½»é‡çº§Pythonä»£ç æ‰§è¡Œç¯å¢ƒ
- **ç»“æœéªŒè¯**ï¼šåŸºäºæµ‹è¯•ç”¨ä¾‹çš„è‡ªåŠ¨éªŒè¯
- **ç­”æ¡ˆä¿å­˜**ï¼šç”¨æˆ·ä»£ç è‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“

#### ç»ƒä¹ æµç¨‹
```python
# ç»ƒä¹ æ‰§è¡Œæµç¨‹
def execute_exercise(user_id, exercise_id, code):
    # 1. éªŒè¯ä»£ç è¯­æ³•
    syntax_check = check_python_syntax(code)

    # 2. æ‰§è¡Œä»£ç ï¼ˆæ²™ç®±ç¯å¢ƒï¼‰
    execution_result = run_code_safely(code)

    # 3. è¿è¡Œæµ‹è¯•ç”¨ä¾‹
    test_results = run_test_cases(exercise_id, execution_result)

    # 4. ä¿å­˜ç»“æœ
    save_submission(user_id, exercise_id, code, test_results)

    return {
        'syntax_ok': syntax_check,
        'execution_result': execution_result,
        'tests_passed': test_results,
        'score': calculate_score(test_results)
    }
```

### 4. AIå­¦ä¹ åŠ©ç† ğŸ¤–

#### åŠŸèƒ½ç‰¹æ€§
- **AIå¯¹è¯**ï¼šé›†æˆé˜¿é‡Œäº‘åƒé—®APIçš„å¯¹è¯åŠŸèƒ½
- **ä»£ç è§£é‡Š**ï¼šAIè§£é‡Šä»£ç é€»è¾‘å’Œæ¦‚å¿µ
- **é”™è¯¯è¯Šæ–­**ï¼šåˆ†æä»£ç é”™è¯¯å¹¶æä¾›ä¿®å¤å»ºè®®
- **å­¦ä¹ æŒ‡å¯¼**ï¼šæ ¹æ®å­¦ä¹ è¿›åº¦æä¾›ä¸ªæ€§åŒ–å»ºè®®

#### é…ç½®ç®¡ç†
```python
# config.py
class Config:
    # AIæ¨¡å‹é…ç½®
    QWEN_API_KEY = os.getenv('QWEN_API_KEY')
    QWEN_BASE_URL = os.getenv('QWEN_BASE_URL', 'https://dashscope.aliyuncs.com/api/v1')
    QWEN_MODEL = os.getenv('QWEN_MODEL', 'qwen-turbo')

    # å¯é…ç½®çš„AIæ¨¡å‹é€‰é¡¹
    AVAILABLE_MODELS = {
        'qwen-turbo': 'é€šä¹‰åƒé—®-å¿«é€Ÿç‰ˆ',
        'qwen-plus': 'é€šä¹‰åƒé—®-å¢å¼ºç‰ˆ',
        'qwen-max': 'é€šä¹‰åƒé—®-æ——èˆ°ç‰ˆ'
    }
```

#### AIäº¤äº’æ¥å£
```python
class AIAssistant:
    def __init__(self, api_key, base_url, model):
        self.client = OpenAI(
            api_key=api_key,
            base_url=base_url
        )
        self.model = model

    def explain_code(self, code, language='python'):
        """è§£é‡Šä»£ç åŠŸèƒ½"""
        prompt = f"è¯·è§£é‡Šä»¥ä¸‹{language}ä»£ç çš„åŠŸèƒ½å’Œé€»è¾‘ï¼š\n\n{code}"
        return self.chat(prompt)

    def debug_code(self, code, error_message):
        """åˆ†æä»£ç é”™è¯¯"""
        prompt = f"ä»£ç å‡ºç°é”™è¯¯ï¼š{error_message}\n\nä»£ç ï¼š\n{code}\n\nè¯·åˆ†æé”™è¯¯åŸå› å¹¶æä¾›ä¿®å¤å»ºè®®ã€‚"
        return self.chat(prompt)

    def learning_guidance(self, week, progress):
        """æä¾›å­¦ä¹ æŒ‡å¯¼"""
        prompt = f"ç”¨æˆ·æ­£åœ¨å­¦ä¹ CS146Sç¬¬{week}å‘¨å†…å®¹ï¼Œå½“å‰è¿›åº¦{progress}%ã€‚è¯·æä¾›å­¦ä¹ å»ºè®®å’Œä¸‹ä¸€æ­¥è®¡åˆ’ã€‚"
        return self.chat(prompt)
```

### 5. å­¦ä¹ è¿›åº¦è¿½è¸ª ğŸ“Š

#### è¿›åº¦è®°å½•
- **å‘¨å®ŒæˆçŠ¶æ€**ï¼šæœªå¼€å§‹/è¿›è¡Œä¸­/å·²å®Œæˆ
- **ç»ƒä¹ å®Œæˆæƒ…å†µ**ï¼šæ¯ä¸ªç»ƒä¹ çš„æäº¤è®°å½•å’Œå¾—åˆ†
- **å­¦ä¹ æ—¶é•¿ç»Ÿè®¡**ï¼šé¡µé¢è®¿é—®æ—¶é•¿ç´¯è®¡
- **æˆå°±ç³»ç»Ÿ**ï¼šå­¦ä¹ é‡Œç¨‹ç¢‘å’Œå¾½ç« 

#### æ•°æ®å¯è§†åŒ–
- **è¿›åº¦æ¡**ï¼šå„å‘¨å­¦ä¹ è¿›åº¦å¯è§†åŒ–
- **æˆç»©é›·è¾¾å›¾**ï¼šå„ç±»å‹ç»ƒä¹ çš„å¾—åˆ†åˆ†å¸ƒ
- **å­¦ä¹ æ›²çº¿**ï¼šéšæ—¶é—´çš„å˜åŒ–è¶‹åŠ¿å›¾

## ğŸ’¾ æ•°æ®æ¨¡å‹è®¾è®¡

### SQLiteæ•°æ®åº“è®¾è®¡

#### æ ¸å¿ƒæ•°æ®è¡¨

```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username VARCHAR(80) UNIQUE NOT NULL,
    email VARCHAR(120) UNIQUE NOT NULL,
    password_hash VARCHAR(128) NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    last_login DATETIME
);

-- å‘¨å­¦ä¹ æ¨¡å—è¡¨ (é¢„å®šä¹‰8å‘¨å†…å®¹)
CREATE TABLE weeks (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    week_number INTEGER UNIQUE NOT NULL,  -- 1-8
    title VARCHAR(200) NOT NULL,
    description TEXT,
    content_path VARCHAR(500),  -- Markdownæ–‡æ¡£è·¯å¾„
    is_active BOOLEAN DEFAULT 1
);

-- ç»ƒä¹ é¢˜ç›®è¡¨
CREATE TABLE exercises (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    week_id INTEGER NOT NULL,
    title VARCHAR(200) NOT NULL,
    description TEXT,
    exercise_type VARCHAR(50) NOT NULL,  -- 'prompt', 'code', 'project'
    initial_code TEXT,  -- åˆå§‹ä»£ç æ¨¡æ¿
    test_code TEXT,     -- æµ‹è¯•ä»£ç 
    solution_code TEXT, -- å‚è€ƒç­”æ¡ˆ
    points INTEGER DEFAULT 10,
    order_index INTEGER DEFAULT 0,
    FOREIGN KEY (week_id) REFERENCES weeks(id)
);

-- ç”¨æˆ·æäº¤è®°å½•è¡¨
CREATE TABLE submissions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    exercise_id INTEGER NOT NULL,
    submitted_code TEXT NOT NULL,
    execution_result TEXT,  -- JSONæ ¼å¼çš„æ‰§è¡Œç»“æœ
    test_results TEXT,      -- JSONæ ¼å¼çš„æµ‹è¯•ç»“æœ
    score DECIMAL(5,2),
    is_correct BOOLEAN DEFAULT 0,
    submitted_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    attempts_count INTEGER DEFAULT 1,
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (exercise_id) REFERENCES exercises(id),
    UNIQUE(user_id, exercise_id, attempts_count)
);

-- å­¦ä¹ è¿›åº¦è¡¨
CREATE TABLE user_progress (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    week_id INTEGER NOT NULL,
    status VARCHAR(20) DEFAULT 'not_started',  -- 'not_started', 'in_progress', 'completed'
    completed_exercises INTEGER DEFAULT 0,
    total_exercises INTEGER DEFAULT 0,
    last_accessed DATETIME DEFAULT CURRENT_TIMESTAMP,
    time_spent INTEGER DEFAULT 0,  -- ç§’æ•°
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (week_id) REFERENCES weeks(id),
    UNIQUE(user_id, week_id)
);

-- AIå¯¹è¯è®°å½•è¡¨
CREATE TABLE ai_conversations (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    exercise_id INTEGER,  -- å¯ä¸ºç©ºï¼Œå…³è”å…·ä½“ç»ƒä¹ 
    user_message TEXT NOT NULL,
    ai_response TEXT NOT NULL,
    message_type VARCHAR(50) DEFAULT 'chat',  -- 'chat', 'explain', 'debug', 'guidance'
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (exercise_id) REFERENCES exercises(id)
);

-- ç³»ç»Ÿé…ç½®è¡¨
CREATE TABLE system_config (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    config_key VARCHAR(100) UNIQUE NOT NULL,
    config_value TEXT,
    description VARCHAR(500),
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

## ğŸ”— Flaskè·¯ç”±è®¾è®¡

### è·¯ç”±è®¾è®¡åŸåˆ™

1. **é¡µé¢è·¯ç”±**ï¼šç›´æ¥è¿”å›HTMLé¡µé¢
2. **APIè·¯ç”±**ï¼šè¿”å›JSONæ•°æ®ï¼Œç»Ÿä¸€å‰ç¼€`/api/`
3. **è¡¨å•å¤„ç†**ï¼šä½¿ç”¨Flask-WTFå¤„ç†POSTè¯·æ±‚
4. **ä¼šè¯ç®¡ç†**ï¼šåŸºäºFlask-Sessionçš„ç”¨æˆ·çŠ¶æ€
5. **é”™è¯¯å¤„ç†**ï¼šç»Ÿä¸€çš„é”™è¯¯é¡µé¢å’ŒJSONå“åº”

### æ ¸å¿ƒé¡µé¢è·¯ç”±

```python
# ä¸»é¡µå’Œå¯¼èˆª
@app.route('/')
def index():
    """ä¸»é¡µ - æ˜¾ç¤ºå­¦ä¹ è¿›åº¦æ¦‚è§ˆ"""

@app.route('/login', methods=['GET', 'POST'])
def login():
    """ç”¨æˆ·ç™»å½•é¡µé¢"""

@app.route('/register', methods=['GET', 'POST'])
def register():
    """ç”¨æˆ·æ³¨å†Œé¡µé¢"""

@app.route('/logout')
def logout():
    """ç”¨æˆ·ç™»å‡º"""

# å­¦ä¹ æ¨¡å—è·¯ç”±
@app.route('/week/<int:week_number>')
def week_detail(week_number):
    """å‘¨å­¦ä¹ é¡µé¢ - æ˜¾ç¤ºè¯¥å‘¨çš„æ–‡æ¡£å’Œç»ƒä¹ åˆ—è¡¨"""

@app.route('/exercise/<int:exercise_id>')
def exercise_detail(exercise_id):
    """ç»ƒä¹ è¯¦æƒ…é¡µé¢ - ä»£ç ç¼–è¾‘å™¨å’Œç»ƒä¹ è¯´æ˜"""

@app.route('/ai-assistant')
def ai_assistant():
    """AIå­¦ä¹ åŠ©ç†é¡µé¢"""

@app.route('/profile')
def profile():
    """ä¸ªäººä¸­å¿ƒ - å­¦ä¹ è¿›åº¦å’Œç»Ÿè®¡"""

# æ–‡æ¡£é¡µé¢è·¯ç”±
@app.route('/docs/<path:doc_path>')
def show_doc(doc_path):
    """æ˜¾ç¤ºMarkdownæ–‡æ¡£"""
```

### APIè·¯ç”±è®¾è®¡

```python
# ç”¨æˆ·ç›¸å…³API
@app.route('/api/user/progress')
@login_required
def get_user_progress():
    """è·å–ç”¨æˆ·å­¦ä¹ è¿›åº¦"""

@app.route('/api/user/stats')
@login_required
def get_user_stats():
    """è·å–ç”¨æˆ·å­¦ä¹ ç»Ÿè®¡"""

# ç»ƒä¹ ç›¸å…³API
@app.route('/api/exercise/<int:exercise_id>/execute', methods=['POST'])
@login_required
def execute_exercise(exercise_id):
    """æ‰§è¡Œç”¨æˆ·æäº¤çš„ä»£ç """

@app.route('/api/exercise/<int:exercise_id>/submit', methods=['POST'])
@login_required
def submit_exercise(exercise_id):
    """æäº¤ç»ƒä¹ ç­”æ¡ˆ"""

@app.route('/api/exercise/<int:exercise_id>/history')
@login_required
def get_exercise_history(exercise_id):
    """è·å–ç»ƒä¹ æäº¤å†å²"""

# AIäº¤äº’API
@app.route('/api/ai/chat', methods=['POST'])
@login_required
def ai_chat():
    """AIå¯¹è¯æ¥å£"""

@app.route('/api/ai/explain', methods=['POST'])
@login_required
def ai_explain_code():
    """AIä»£ç è§£é‡Š"""

@app.route('/api/ai/debug', methods=['POST'])
@login_required
def ai_debug_code():
    """AIé”™è¯¯è¯Šæ–­"""

@app.route('/api/ai/guidance', methods=['POST'])
@login_required
def ai_learning_guidance():
    """AIå­¦ä¹ æŒ‡å¯¼"""

# ç³»ç»Ÿé…ç½®API (ç®¡ç†å‘˜)
@app.route('/api/config/ai-models')
def get_available_models():
    """è·å–å¯ç”¨çš„AIæ¨¡å‹åˆ—è¡¨"""

@app.route('/api/config/update', methods=['POST'])
@admin_required
def update_config():
    """æ›´æ–°ç³»ç»Ÿé…ç½®"""
```

### å‰ç«¯JavaScriptæ¥å£

```javascript
// ä»£ç æ‰§è¡Œæ¥å£
async function executeCode(exerciseId, code) {
    const response = await fetch(`/api/exercise/${exerciseId}/execute`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ code: code })
    });
    return await response.json();
}

// AIå¯¹è¯æ¥å£
async function chatWithAI(message, context = {}) {
    const response = await fetch('/api/ai/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            message: message,
            context: context
        })
    });
    return await response.json();
}

// å­¦ä¹ è¿›åº¦æ¥å£
async function getLearningProgress() {
    const response = await fetch('/api/user/progress');
    return await response.json();
}
```

## ğŸ“… å®æ–½è®¡åˆ’


#### Week 1: åŸºç¡€æ¡†æ¶æ­å»º
- [ ] Flaskåº”ç”¨åˆå§‹åŒ–å’Œç›®å½•ç»“æ„
- [ ] SQLiteæ•°æ®åº“è®¾è®¡å’Œæ¨¡å‹å®šä¹‰
- [ ] ç”¨æˆ·æ³¨å†Œç™»å½•åŠŸèƒ½
- [ ] åŸºç¡€é¡µé¢æ¨¡æ¿(Bootstrap)
- [ ] ä¼šè¯ç®¡ç†å’Œç”¨æˆ·è®¤è¯

#### Week 2: å‘¨å­¦ä¹ æ¨¡å—
- [ ] å‘¨æ•°æ®é¢„å¡«å……(Week1-8å†…å®¹)
- [ ] Markdownæ–‡æ¡£å±•ç¤ºåŠŸèƒ½
- [ ] å‘¨å­¦ä¹ é¡µé¢å’Œå¯¼èˆª
- [ ] å­¦ä¹ è¿›åº¦åŸºç¡€è¿½è¸ª
- [ ] ç»ƒä¹ åˆ—è¡¨å±•ç¤º

#### Week 3: åœ¨çº¿ç»ƒä¹ ç³»ç»Ÿ
- [ ] Monaco Editoré›†æˆ
- [ ] Pythonä»£ç è¿œç¨‹æ‰§è¡ŒæœåŠ¡ (å¸¦è¾“å…¥è¾“å‡ºå¤„ç†)
- [ ] å‰ç«¯ä»£ç è¿è¡ŒçŠ¶æ€å±•ç¤º (è¿è¡Œä¸­/å®Œæˆ/é”™è¯¯)
- [ ] äº¤äº’å¼è¾“å…¥æ”¯æŒ (å¤„ç†input()å‡½æ•°)
- [ ] å®æ—¶è¾“å‡ºæ˜¾ç¤º (printè¯­å¥ç»“æœ)
- [ ] ç»ƒä¹ æäº¤å’Œä¿å­˜åŠŸèƒ½
- [ ] åŸºç¡€æµ‹è¯•ç”¨ä¾‹éªŒè¯
- [ ] ç»ƒä¹ å†å²è®°å½•

#### Week 4: AIå­¦ä¹ åŠ©ç†
- [ ] é˜¿é‡Œäº‘åƒé—®APIé›†æˆ
- [ ] AIå¯¹è¯åŠŸèƒ½
- [ ] ä»£ç è§£é‡ŠåŠŸèƒ½
- [ ] é”™è¯¯è¯Šæ–­åŠŸèƒ½
- [ ] AIé…ç½®ç®¡ç†ç•Œé¢

#### Week 5: å­¦ä¹ è¿›åº¦ç³»ç»Ÿ
- [ ] è¿›åº¦æ•°æ®ç»Ÿè®¡
- [ ] å¯è§†åŒ–è¿›åº¦å›¾è¡¨
- [ ] ä¸ªäººä¸­å¿ƒé¡µé¢
- [ ] æˆå°±å’Œå¾½ç« ç³»ç»Ÿ
- [ ] å­¦ä¹ æŠ¥å‘Šç”Ÿæˆ

#### Week 6: ç³»ç»Ÿä¼˜åŒ–å’Œæµ‹è¯•
- [ ] ä»£ç æ‰§è¡Œå®‰å…¨åŠ å›º
- [ ] æ€§èƒ½ä¼˜åŒ–å’Œç¼“å­˜
- [ ] ç”¨æˆ·ç•Œé¢ä¼˜åŒ–
- [ ] å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹
- [ ] éƒ¨ç½²è„šæœ¬ç¼–å†™

---

## ğŸ”¬ Pythonä»£ç æ‰§è¡Œæ–¹æ¡ˆå¯è¡Œæ€§åˆ†æ

### âœ… **æ–¹æ¡ˆå¯è¡Œæ€§ç»“è®º**

ç»è¿‡è¯¦ç»†çš„æŠ€æœ¯åˆ†æï¼Œ**è¯¥æ–¹æ¡ˆå®Œå…¨å¯è¡Œ**ï¼Œå¹¶ä¸”å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

#### æŠ€æœ¯æˆç†Ÿåº¦
- **Pythonæ‰§è¡Œ**ï¼šsubprocess + æ ‡å‡†åº“ï¼ŒæŠ€æœ¯æˆç†Ÿç¨³å®š
- **å‰åç«¯é€šä¿¡**ï¼šAJAX + JSONï¼Œç®€å•å¯é 
- **å®‰å…¨æ§åˆ¶**ï¼šä»£ç é™æ€åˆ†æ + èµ„æºé™åˆ¶ï¼Œé£é™©å¯æ§
- **ç”¨æˆ·ä½“éªŒ**ï¼šåŒæ­¥æ‰§è¡Œ + çŠ¶æ€åé¦ˆï¼Œå“åº”åŠæ—¶

#### å®ç°å¤æ‚åº¦
- **åç«¯å®ç°**ï¼šä¸­ç­‰å¤æ‚åº¦ (çº¦200è¡Œæ ¸å¿ƒä»£ç )
- **å‰ç«¯å®ç°**ï¼šç®€å•é›†æˆ (çº¦100è¡ŒJavaScript)
- **å®‰å…¨æ²™ç®±**ï¼šå¯å¤ç”¨ç°æœ‰æ–¹æ¡ˆ
- **éƒ¨ç½²è¿ç»´**ï¼šè½»é‡çº§ï¼Œæ— å¤æ‚ä¾èµ–

#### æ€§èƒ½è¡¨ç°
- **æ‰§è¡Œé€Ÿåº¦**ï¼šå•æ¬¡æ‰§è¡Œ < 2ç§’ (ç½‘ç»œ+è®¡ç®—)
- **å¹¶å‘å¤„ç†**ï¼šæ”¯æŒ50+ åŒæ—¶æ‰§è¡Œ
- **èµ„æºæ¶ˆè€—**ï¼šå†…å­˜ < 50MB/æ‰§è¡Œï¼ŒCPU < 10%
- **ç¨³å®šæ€§**ï¼š99%+ æˆåŠŸç‡ (æ­£å¸¸ä»£ç )

### ğŸ¯ **æ¨èå®æ–½æ–¹æ¡ˆ**

#### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€ç‰ˆæœ¬ (4å‘¨)
1. **åŒæ­¥æ‰§è¡Œæ¨¡å¼**ï¼šå®ç°æœ€æ ¸å¿ƒçš„åŠŸèƒ½
2. **åŸºç¡€å®‰å…¨æ£€æŸ¥**ï¼šé˜²æ­¢æ¶æ„ä»£ç æ‰§è¡Œ
3. **æ ‡å‡†è¾“å…¥è¾“å‡º**ï¼šæ”¯æŒprint()å’ŒåŸºç¡€input()
4. **é”™è¯¯å¤„ç†**ï¼šå®Œæ•´çš„å¼‚å¸¸æ•è·å’Œå±•ç¤º

#### ç¬¬äºŒé˜¶æ®µï¼šå¢å¼ºç‰ˆæœ¬ (å¯é€‰)
1. **å®æ—¶è¾“å‡ºæµ**ï¼šWebSocketæ”¯æŒå®æ—¶æ˜¾ç¤º
2. **äº¤äº’å¼è¾“å…¥**ï¼šåŠ¨æ€input()å‡½æ•°å¤„ç†
3. **é«˜çº§æ²™ç®±**ï¼šDockerå®¹å™¨éš”ç¦»
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šæ‰§è¡Œé˜Ÿåˆ—å’Œç¼“å­˜æœºåˆ¶

### ğŸ’¡ **å…³é”®æŠ€æœ¯è¦ç‚¹**

#### 1. ä»£ç æ‰§è¡Œå®‰å…¨
```python
# ç¦æ­¢å±é™©æ“ä½œ
DANGEROUS_PATTERNS = [
    r'import\s+(os|sys|subprocess|socket)',
    r'open\s*\(',
    r'eval\s*\(',
    r'exec\s*\(',
    r'__import__\s*\(',
]

def is_safe_code(code: str) -> bool:
    """æ£€æŸ¥ä»£ç å®‰å…¨æ€§"""
    for pattern in DANGEROUS_PATTERNS:
        if re.search(pattern, code):
            return False
    return True
```

#### 2. èµ„æºé™åˆ¶
```python
# ä½¿ç”¨resourceæ¨¡å—é™åˆ¶èµ„æº
def execute_with_limits(code: str) -> dict:
    def limit_resources():
        resource.setrlimit(resource.RLIMIT_CPU, (10, 10))  # 10ç§’CPUæ—¶é—´
        resource.setrlimit(resource.RLIMIT_AS, (50 * 1024 * 1024, 50 * 1024 * 1024))  # 50MBå†…å­˜

    # åœ¨å­è¿›ç¨‹ä¸­æ‰§è¡Œä»¥ç¡®ä¿é™åˆ¶ç”Ÿæ•ˆ
    return subprocess.run(['python', '-c', code],
                         preexec_fn=limit_resources,
                         capture_output=True,
                         timeout=15)
```

#### 3. è¾“å…¥å¤„ç†ç­–ç•¥
```python
def handle_input_functions(code: str, user_inputs: dict) -> str:
    """
    å¤„ç†ä»£ç ä¸­çš„input()å‡½æ•°
    å°†input('prompt')æ›¿æ¢ä¸ºé¢„å®šä¹‰çš„è¾“å…¥å€¼
    """
    # ä½¿ç”¨ASTè§£æå’Œä¿®æ”¹input()è°ƒç”¨
    tree = ast.parse(code)
    # æ›¿æ¢input()èŠ‚ç‚¹ä¸ºå¸¸é‡æˆ–å˜é‡å¼•ç”¨
    # è¿”å›ä¿®æ”¹åçš„ä»£ç 
```

### âš ï¸ **é£é™©ä¸åº”å¯¹**

#### æŠ€æœ¯é£é™©
1. **æ¶æ„ä»£ç æ‰§è¡Œ** â†’ é™æ€ä»£ç åˆ†æ + æ²™ç®±ç¯å¢ƒ
2. **èµ„æºè€—å°½** â†’ CPU/å†…å­˜é™åˆ¶ + è¶…æ—¶æ§åˆ¶
3. **å¹¶å‘å†²çª** â†’ è¿›ç¨‹éš”ç¦» + é˜Ÿåˆ—ç®¡ç†

#### ä¸šåŠ¡é£é™©
1. **åŠŸèƒ½ä¸ç¨³å®š** â†’ åˆ†é˜¶æ®µå®ç° + å……åˆ†æµ‹è¯•
2. **ç”¨æˆ·ä½“éªŒå·®** â†’ çŠ¶æ€åé¦ˆ + é”™è¯¯æç¤ºä¼˜åŒ–
3. **å­¦ä¹ æ•ˆæœä¸ä½³** â†’ ä¸ç°æœ‰ç»ƒä¹ ç»“åˆ + é€æ­¥å®Œå–„

### ğŸš€ **å®æ–½å»ºè®®**

1. **ä»å°å¼€å§‹**ï¼šä»Week1çš„åŸºç¡€ç»ƒä¹ å¼€å§‹å®ç°
2. **å¿«é€Ÿè¿­ä»£**ï¼šæ¯2å‘¨å‘å¸ƒä¸€ä¸ªå°ç‰ˆæœ¬
3. **ç”¨æˆ·æµ‹è¯•**ï¼šé‚€è¯·å°‘é‡ç”¨æˆ·æµ‹è¯•å’Œåé¦ˆ
4. **ç›‘æ§ metrics**ï¼šæ”¶é›†æ‰§è¡ŒæˆåŠŸç‡ã€å¹³å‡å“åº”æ—¶é—´ç­‰æŒ‡æ ‡
5. **æ¸è¿›å¢å¼º**ï¼šåŸºç¡€åŠŸèƒ½ç¨³å®šåå†æ·»åŠ é«˜çº§ç‰¹æ€§

**æ€»ç»“**ï¼šè¿™ä¸ªæ–¹æ¡ˆæŠ€æœ¯ä¸Šå®Œå…¨å¯è¡Œï¼Œå®ç°å¤æ‚åº¦é€‚ä¸­ï¼Œèƒ½å¤Ÿå¾ˆå¥½åœ°æ»¡è¶³åœ¨çº¿ç¼–ç¨‹ç»ƒä¹ çš„éœ€æ±‚ã€‚é€šè¿‡åˆç†çš„æ¶æ„è®¾è®¡å’Œå®‰å…¨æªæ–½ï¼Œå¯ä»¥æ‰“é€ ä¸€ä¸ªç¨³å®šã€å®‰å…¨ã€é«˜æ•ˆçš„ä»£ç æ‰§è¡Œç¯å¢ƒã€‚

*æ­¤æ–¹æ¡ˆåŸºäºç°æœ‰CS146Sè¯¾ç¨‹å†…å®¹ï¼Œæ—¨åœ¨æ‰“é€ ä¸€ä¸ªç°ä»£åŒ–ã€æ™ºèƒ½åŒ–ã€äº’åŠ¨æ€§çš„åœ¨çº¿å­¦ä¹ å¹³å°ã€‚å¦‚æœ‰å…·ä½“é—®é¢˜æˆ–éœ€è¦æ·±å…¥è®¨è®ºæŸä¸ªæ¨¡å—ï¼Œè¯·éšæ—¶å‘ŠçŸ¥ã€‚*

