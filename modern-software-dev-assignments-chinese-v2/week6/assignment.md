# 第6周 — 使用Semgrep扫描并修复漏洞

## 作业概述
使用**Semgrep**对`week6/`中提供的应用程序运行静态分析。三分发现结果并修复至少3个安全问题。在你的报告中，解释Semgrep发现了什么问题以及你如何修复它们。

## 了解Semgrep
Semgrep是一个开源静态分析工具，用于搜索代码、查找错误并强制执行安全护栏和编码标准。

1. 点击[这里](https://github.com/semgrep/semgrep/blob/develop/README.md)了解Semgrep。

2. 按照上述链接中的安装说明进行安装。你可以选择使用**Semgrep Appsec平台**还是**CLI工具**。

## 扫描任务

### 你将扫描什么
- 后端Python（FastAPI）：`week6/backend/`
- 前端JavaScript：`week6/frontend/`
- 依赖项：`week6/requirements.txt`
- 配置/环境（用于密钥）：`week6/`内的文件

### 运行通用安全扫描以及针对密钥和依赖项的重点扫描。

从**作业仓库根目录**运行以下命令，以应用包含代码和密钥规则的精选CI风格包：
```bash
semgrep ci --subdir week6
```

## 任务
1. 选择Semgrep识别的任意3个问题，并使用你选择的AI编码工具修复它们。

2. 显示精确的编辑并解释缓解措施（例如，参数化SQL、更安全的API、更强的加密、清理的DOM写入、限制的CORS、依赖项升级）。

3. 重要：确保修复后应用程序仍能运行且测试仍通过。

## 交付物
### 1. 发现结果简要概述
- 总结Semgrep报告的类别（SAST/密钥/SCA）。
- 注意你选择忽略的任何误报或噪音规则以及原因。

### 2. 三个修复（修复前→修复后）
对于每个修复的问题：
- 文件和行号
- Semgrep标记的规则/类别
- 简要风险描述
- 你的更改（简短代码差异或说明，AI编码工具使用）
- 为什么这能缓解问题

## 提示
- 偏好解决根本原因的最小化、针对性更改。
- 每次修复后重新运行Semgrep以确认发现已解决且未引入新的发现。
- 对于依赖项，记录升级的版本，如果使用了供应链扫描则链接到安全公告。

## 提交说明
1. 确保所有更改已推送到远程仓库以供评分。
2. 确保你已将brentju和febielin添加为作业仓库的协作者。
3. 通过Gradescope提交。 